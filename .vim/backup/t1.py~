
def memory_stat():
    mem, stat = {}, {}
    f = open("/proc/meminfo", "r")
    lines = f.readlines()
    f.close()
    for line in lines:
        if len(line) < 2:
            continue
        name = line.split(':')[0]
        var = line.split(':')[1].split()[0]
        mem[name] = long(var) * 1024.0
        print var
    stat['total'] = int(mem['MemTotal'] / (1024 * 1024))
    stat['used'] = int(mem['MemTotal'] - mem['MemFree'] -
                       mem['Buffers'] - mem['Cached']) / (1024 * 1024)
    stat['free'] = int(mem['MemFree'] + mem['Buffers'] +
                       mem['Cached']) / (1024 * 1024)
    return stat

print memory_stat()
